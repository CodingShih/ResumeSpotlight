人工智慧於模擬人類對話系統設計 
圖  11.  窮舉法演算法 
主詞抓取的設計概念： 
          S1:  我想知道等等會下雨嗎? 
          S2:  我 
        比對結果:  我想知道等等會下雨嗎? 
                            ║ 
                            我 
S1 中有一個地方出現 S2，則結果輸出比對成功。最直接的演算法就是窮舉法：
挪動  S1  ，對準  S2  的各個位置；逐一比對字元、判斷是否相等。 
窮舉方法：順序窮舉    /    排列窮舉    /    組合窮舉 
窮舉法的步驟： 
1.列出相符的所有可能解。 
2.根據條件逐一判定。 
3.滿足條件即得到一個解。 
    本論文使用的為順序窮舉法即逐一比對字元，未來可以考慮更多比對辦法設
計，通常使用到 C++中的一些參數、指令來做到比對設計的程式，後面章節會介
紹到相關用法。 
25 
逢甲大學 e-Theses & Dissertations (104 學年度) 
人工智慧於模擬人類對話系統設計 
第三章  系統架構及設計 
建立一個具有專門知識的專家系統至少要有三個大步驟： 
1.  決定系統的領域 
2.  決定規則表示的方法 
3.  獲取必要知識 
    系統領域為人類對話反應模式，去找尋相關的研究及語言學問題，決定程式
的設計方法去達到如何表現出期望成果。 
對話系統的專家系統的架構為下圖 12 所示[18]。 
圖  12.  專家系統架構[18] 
3.1  對話系統語言設計 
    對話語言選用的是中文或英文，程式語言的設計則是 C 及 C++，其實如同
前面所提到的自然語言處理所遇到最大的困難度就是人類語言具有複雜性及多
樣性的特質，因此在設計程式時，需要簡化及範圍限制的規則模式所選定的語言
部分集合，並且對使用者在使用上不會出現影響及困難，讓電腦可以簡易處理訊
26 
逢甲大學 e-Theses & Dissertations (104 學年度) 
人工智慧於模擬人類對話系統設計 
息。在對話中為了要讓電腦了解一些字彙，所以說明簡化這些字彙的定義，舉一
些可解釋的字彙及詞性： 
表  7.  單字詞性分類規則 
字彙 
你、我、他…… 
You、I、He、She…… 
好厲害、好大、好小、圓的、方
的…… 
跑、遊戲、對話、唱歌…… 
孩子、門、房子、雲、車子…… 
在、於、從、自、in、on、to、from、
at…… 
一個、一張、一枝、一隻、the、a、
an…… 
詞性 
主詞 
形容詞 
動詞 
名詞 
介系詞 
冠詞 
    以人類對話的文句型態來簡化表示，一般句子可分為很多種根據上表所提到
的詞性作排列組合[18][19][20]，舉例如下： 
句子詞性排列分析              代號 
主詞+動詞+受詞                                S+V+O 
主詞+形容詞                      S+A 
主詞+動詞+形容詞                            S+V+A 
    等等的排列組合可以是複雜多種類的，所以在處理上困難度很大，本論文僅
處理簡單的組合設計。 
27 
逢甲大學 e-Theses & Dissertations (104 學年度) 
人工智慧於模擬人類對話系統設計 
3.2  資料庫設計 
    資料庫是用來儲存資料的地方，正式的定義為資料庫為一套結構化資料的集
合體，是專家系統的基本組成部分。就像工具書的資料組合成一本電子書，資料
以不重覆的方式來儲存許多有用的資訊，讓使用者可以透過檢索、排序、計算、
查詢等方法，來做有效率的管理並運用的資訊。 
    C 語言在處理這類 AI 程式上對比一些專門處理 AI 的程式語言(Lisp)上有一
些困難，Lisp 在設計上都是直接宣告(declarative)，而 C 語言則是程序性(procedural)
的。以 C 語言的程式去設計，在對話資料庫裡有大量的字串文句，範例句子
(Sentence)以陣列(array)結構做資料庫，運用任何虛擬的記憶及擷取(retrieval)技術，
在字元字串(character string)使用串列處理，比對字串中的單元(token)，加入一些
指標處理等等[12][17]。   
表  8.  指令及意義 
功能 
作用 
獲取單元(get token) 
從字串的字首傳到下個單元位置。 
獲取句子(get line) 
複製整個字串輸出。 
置回(put-back) 
取出某個單元放到下個字串字首。 
比對指標內容(pos) 
比對內容物。 
加入(assert) 
取消(retract) 
清除(clear) 
找尋(find) 
配對(match) 
在資料庫增加一筆資料。 
在資料庫移除一筆資料。 
在資料庫清除所有資料。 
找尋一筆資料。 
搜尋單個單元在資料庫的存在。 
28 
逢甲大學 e-Theses & Dissertations (104 學年度) 
人工智慧於模擬人類對話系統設計 
    在主程式前方先設定關鍵字或範例文句的資料庫，在使用者輸入對話文句後，
可以比對出符合資料庫內的設定後，輸出相應的回答模式，應用自然語言處理來
設計，並對對話人物的改變作主詞轉換，比如你、我、他的主詞角色輸出改變。 
第一階段以單字詞建構資料庫 
表  9.  參考表 7 所設計的單字資料庫執行規則 
優先層級 
設定規則 
資料庫定義 
第一級 
主詞資料庫:你、
我、她、他、它等…… 
當輸入端(input)資料，有你、我這些 Data
進來時，可抓取出來，並辨別對話人物討論
的對象。 
動詞資料庫:聊天、
當對話文句比對出特定動作的設定指令，會
第二級 
玩遊戲、想要、喜歡
輸出對應的模式回答，去執行後續狀態模
做、猜數字等…… 
擬。 
名詞資料庫:繪畫、
第三級 
運動、美食、人名
等…… 
當出現特定名詞或形容詞會執行反問之動
作，使對話可以另開闢出新的互動模式。 
圖  13.  資料庫設計概念圖 
29 
逢甲大學 e-Theses & Dissertations (104 學年度) 
人工智慧於模擬人類對話系統設計 
    在單字的處理裡將感情的變因摻入設定中，可以使系統讓人有樂觀的錯覺或
是其他情緒化表現感覺出現，利用特殊文字意義的使用來製造情感的表達實際應
用，可以使系統在使用上不會令人感到乏味厭煩。 
表  10.  單字資料庫中設定對應的反應回答 
單字設定 
系統反應 
Murder 
謀殺 
Never 
永不 
Bye 
再見 
不開心 
想要做 
I don’t like peoplewho murder. 
我不喜歡兇手.。 
Do be negative，be positive. 
別放棄、別這樣消極、 
your bill will be mailed to you！ 
你確定不和我聊聊你的問題!? 
你怎麼啦?、發生甚麼事啦? 
一起來做… 
第二階段以對話文句建構資料庫 
    預先設定一些簡單會話文句，盡量簡化會話詞彙以方便系統辨別，對話樣式
的資料結構以定義參數的方式實作，之後有可能再考慮一些複雜度更高的自然語
言頗析設計方法[10][19]。 
舉例： 
+S 要+O(若+S 得到+O 怎樣?) 
                    (為什麼+S 要+O?) 
    如果你輸入我想要吃冰淇淋經由比對這規則(+S 要+O)的結果，+S 對應到我 
，O 對應到吃冰淇淋，所以此樣式比對有成功，再根據資料庫隨意選擇一個反應
樣式句子輸出[10]。 
30 
逢甲大學 e-Theses & Dissertations (104 學年度) 
人工智慧於模擬人類對話系統設計 
第三階段以回答文句建構資料庫 
假設輸入英文文句：How are you?輸出回應是 I am fine。 
輸入中文文句：你喜歡吃甚麼水果?輸出回應是水果是甚麼?能吃嗎? 
回答可以多種設定，加入隨機取值或這其他方法來增加模糊情感的錯覺方法。 
3.3  字串對比 
    本論文常用指令的使用為選 C  語言內  string  函式庫中的指令：「strst」，主
要是針對 兩個 輸 入參數做比對，輸入字串為 Parameters  1 ，找 尋字串則是
Parameters  2，strstr  會先將頭一次比對成功的  pointer  回傳，也就是如果要找尋 
How do  you do?  字串中的  do，函式會回傳第一次比對成功的  do pointer，而並
非回傳最後一個比對到的。 
    Strstr 在本論文用來比對中文單詞上比對為 100%符合相同才會輸出，舉例如:
資料庫內設有一單詞如:你好，當你輸入你好!你好嗎?等等只要比對到單詞出現在
輸入內就會執行相對應的對話文句。 
    第二個比對字串所用到的「strchr」，這字串用來找尋第一次比對成功單一字
母符號，也是一樣回傳該指標，當需要比對單一字元時較常使用此指令，如比對
主詞時只需抓取你我他等單一字元時使用。 
第三個為 strcmp 比較  s1  與  s2  兩個字串是否相等，較長對話句比對時會用到，
有時以陣列方式設計可比對每個位址的字元，第四個為 strncmp 比較  s1  與  s2 
兩個字串前  n  個字元是否相等，特殊比對用途，當關鍵詞需要取出時會使用
strncmp。 
31 
逢甲大學 e-Theses & Dissertations (104 學年度) 
人工智慧於模擬人類對話系統設計 
3.4  推論引擎設計 
    在處理自然語言的機器智慧(machine intelligence)中，有二個重要的概念，第
一個是邏輯概念的設計，因為在人類對話中有述語這個邏輯規則，人類會在對話
中邊討論邊思考，人腦具有很強的分析能力；第二個概念是不確定性，就是在邏
輯陳述裡用來解決不確定性的問題，在人類的思考過程是短暫且快速的在大腦內
處理且可以處理非常複雜的規則邏輯，因此想要模擬出高度仿照人腦思維的邏輯
推論機，實際上有太多困難點要突破，不太可能用數學演算法來完全表示。但是
大多數專家能夠把他們的知識表達成解決問題的簡單規則，而規則正是人工智慧
中最常表達知識的形式，規則可以定義成 IF-THEN 結構來使用。 
IF        部分對給定的資訊或事實 
THEN    部分為相對應的事實  任何規則都包含兩個部分：IF 部分為前項(前提或
條件)，THEN 部分為後項(結論或事實) 
舉現實生活的例子： 
IF  當紅綠燈亮綠燈    THEN  那我們可以開車往前行。 
IF  當紅綠燈亮紅燈    THEN 那我們必須停車等紅燈。 
    規則可以有多個前項，用關鍵字 AND(合取)、OR(析取)連接，或兩個兼有。 
IF-THEN 結構代表的資訊或事實是用來描述如何解決問題的方法，經由推論區
塊比對資料庫後，找到解決方法為此研究設計重點[13][21]。 
    本論文所設計的聊天對話系統推論規則為以下 2 種：圖 14. IF-THEN 規則及
圖 15. IF-THEN-ELSE 規則。 
32 
逢甲大學 e-Theses & Dissertations (104 學年度) 
人工智慧於模擬人類對話系統設計 
圖  14.  IF-THEN 規則 
圖  15.  IF-THEN-ELSE 規則 
33 
逢甲大學 e-Theses & Dissertations (104 學年度) 
人工智慧於模擬人類對話系統設計 
第四章  模擬及測試 
    本論文程式在使用者輸入字串後，抓出比對字串中關鍵單字比對資料庫後，
套用設計的規則樹內去執行，篩選出相對應的反應回答句子。 
    比對的方式有 3 種，第一種是字元長度比較，設定比較字串邊界，當使用者
輸入一段文字，假設要抓取其中 3 個文字單位的中文字，電腦設定就為 6 個字元
(一個英文單字為 1 字元長度，一個中文為 2 個字元長度，一般符號為 1 個字元
長度)，邊界設定好後再每個字元一一比對，當樣式比對成功會輸出對應結果，
如果比對結果樣式沒相同樣式則會重複問答，直到可以比對成功。 
    第二種是字串中字元符的代碼比較，通常英文有英文的編碼可以找查，中文
也是同樣擁有編碼，因此當你輸入一串字串送入系統中，電腦僅比對每個中文字
元的編號，如果字串中每個編號都相同無誤，程式才會執行結果輸出。 
    第三種是以陣列的概念以儲存位址的方式提取內部字元出來一個一個比對
所有資料，比對處理上可以一對多處理單字詞比對。 
    當程式有錯誤輸入或不規則輸入時，系統會輸出一段否定文句並跳出比對執
行程式，而當使用者輸入正確並資料庫內部有對應的字詞時，可重複輸入文句並
持續比對下一句對話的樣式模組，呈現出一個與電腦系統聊天對話的模擬狀態。 
34 
逢甲大學 e-Theses & Dissertations (104 學年度) 
人工智慧於模擬人類對話系統設計 
    下圖 16 為對照組，參考 Eliza 聊天機器人模擬人類與電腦對話之結果，Eliza
程式為英文對話，比對的單字量看設定資料庫的龐大於否，比對結果跟自行設計
之反應句資料庫有關，市面上聊天系統已有更多元反應狀態。 
    Eliza 的系統架構[22][23]為第一部分英文詞組資料庫，作為娛樂導向的聊天
機器人，他內部設定多為口語且多為簡單的單字詞，以二元分類的方式作為自然
語言溝通辦法，在設計自然語言對話程式的最基本辦法就是模仿，並沒有正面回
答任何問題及提出言論看法，Eliza 只是呼應使用者的輸入去執行一個有系統性
的對話模組。 
圖  16.  Eliza 程式執行實際結果作為對照組 
35 
逢甲大學 e-Theses & Dissertations (104 學年度) 
人工智慧於模擬人類對話系統設計 
    Eliza 的程式設計概念是對單字進行比對，抓取整句文句中關鍵單字，如果
單字詞資料庫內有比對成功，立即回傳並執行對應文句，可由下圖 17 看到 pos
比對 t 這個單字詞資料庫，當輸入者輸入 s 與 t 相符合即回傳比對結果。 
    Eliza 程式在比對上準度還是有落差，在處理對話上無法理解語意，僅能處
理字料庫內有的資料且單一對照解釋，很多回應處理都不符合對話邏輯。 
圖  17.  Eliza 程式片段[23] 
36 
逢甲大學 e-Theses & Dissertations (104 學年度) 
